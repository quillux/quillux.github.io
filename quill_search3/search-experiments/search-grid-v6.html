<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="../search-experiments/styles/search-grid-5a.css?v=8" media="screen" />
<script src="../js/jquery-1.12.4.min.js"></script>

</head>
<body>
<header>
  <img src="" />
  <div id="newSearchBlock">
    <label class="new_search" for="newSearch">Search: </label><input type="text" id="newSearch" />
    <button id="doNewSearch" class="btnNewSearch">Search</button>
  </div>
</header>

<div class="pageContent">
  <div id="pageTop">
    <h2 id="displaySearchTerms">Search Results for "Copy Paper"</h2>
    <div id="layoutSwitch">
       <div id="displayList" title="list view" keywords=""></div><div id="displayGrid" title="grid view" keywords=""></div>
    </div>
  </div>
  <div id="filtersCol">
    <h4>Filter the results</h4>
  </div>

  <div class="reorder">
    <div class="promoStrip">
      <b class="promoTitle">Time to Reorder</b>
      <img id="promo-img" src="../images/reorder-strip.png" />
    </div>
  </div>
  <div id="jsonResults">

  </div>
  <br clear="all" />
</div>
<footer>
<div class="footerContent">

</div>

</footer>


</body>
  <script src="../search-experiments/js/get-SearchJson_v6.js"></script>
  <script src="../search-experiments/js/parse-SearchJson_v6.js"></script>

  <script type="text/javascript">


// switch to list view
$("#displayList").on("click", function() {
   var getKeywords =   $("#displayList").attr("keywords");
   if (getKeywords != '') {
     window.location.href = "search-list-v5b.html?keywords=" + getKeywords;
   } else {
     window.location.href = "search-list-v5b.html";
   }
});


// this makes headings sticky
// it is invoked in the js file in the done section for the scrapepage
// found on codepen https://codepen.io/chrissp26/pen/gBrdo by Chris Spittles
var stickyHeaders = (function() {

  var $window = $(window),
      $stickies;

  var load = function(stickies) {

    if (typeof stickies === "object" && stickies instanceof jQuery && stickies.length > 0) {

      $stickies = stickies.each(function() {

        var $thisSticky = $(this).wrap('<div class="followWrap" />');

        $thisSticky
            .data('originalPosition', $thisSticky.offset().top)
            .data('originalHeight', $thisSticky.outerHeight())
              .parent()
              .height($thisSticky.outerHeight());
      });

      $window.off("scroll.stickies").on("scroll.stickies", function() {
		  _whenScrolling();
      });
    }
  };

  var _whenScrolling = function() {

    $stickies.each(function(i) {

      var $thisSticky = $(this),
          $stickyPosition = $thisSticky.data('originalPosition');

      if ($stickyPosition <= $window.scrollTop()) {

        var $nextSticky = $stickies.eq(i + 1),
            $nextStickyPosition = $nextSticky.data('originalPosition') - $thisSticky.data('originalHeight');

        $thisSticky.addClass("fixed");

        if ($nextSticky.length > 0 && $thisSticky.offset().top >= $nextStickyPosition) {

          $thisSticky.addClass("absolute").css("top", $nextStickyPosition);
        }

      } else {

        var $prevSticky = $stickies.eq(i - 1);

        $thisSticky.removeClass("fixed");

        if ($prevSticky.length > 0 && $window.scrollTop() <= $thisSticky.data('originalPosition') - $thisSticky.data('originalHeight')) {

          $prevSticky.removeClass("absolute").removeAttr("style");
        }
      }
    });
  };

  return {
    load: load
  };
})();


   </script>
</html>
